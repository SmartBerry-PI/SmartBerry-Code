<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./assets/icon.png" type="image/x-icon">
    <link rel="stylesheet" href="./css/dashSensores.css">
    <title>SmartBerry - Histórico de Alertas</title>
</head>

<body>
    <header id="indexTop">
        <div class="header-content">
            <nav class="topNav">
                <div class="left">
                    <div class="botao-vertical">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                    <h2 id="logoTexto">SmartBerry</h2>
                    <div class="barra-vertical"></div>
                    <h3 class="subtitle-nav">Histórico de Alertas</h3>
                </div>
            </nav>
        </div>
    </header>
    <!-- Menu Hamburguer Começo -->
    <div class="elements-menu">
        <div class="menu-vertical">
            <img src="./assets/perfil-icon.png" alt="icon-Perfil" class="icon-Perfil">
            <span class="title-welcome" id="texto_bem_vindo">Bem-Vindo Usuário</span>
            <ul class="menu-list">
                <li class="option-menu backto-alto"><u>Visão geral</u></li>
                <li class="option-menu"><u>Alterar Senha</u></li>
            </ul>
            <button class="button-sair">Sair da Conta</button>
        </div>
        <div class="menu-shadow"></div>
    </div>
    <!-- Fim Menu Hambuguer -->
    <section class="historico-screen">
        <!-- Começo do Filtro -->
        <section class="filtro-main">
            <div class="title-filtro">Filtros:</div>
            <div class="filtros-box-main">
                <div class="filtro-content">
                    <span class="subtitle-filter">Data do alerta</span>
                    <input type="date" class="input-date" id="ipt_data_fixa">
                </div>
                <div class="filtro-content">
                    <span class="subtitle-filter">Intervalo data do alerta de:</span>
                    <input type="date" class="input-date" id="ipt_data_de">
                </div>
                <div class="filtro-content">
                    <span class="subtitle-filter">Intervalo data do alerta até:</span>
                    <input type="date" class="input-date" id="ipt_data_ate">
                </div>
                <div class="filtro-content">
                    <span class="subtitle-filter">Canteiro</span>
                    <select id="select_canteiro" class="select-filtro" onchange="aparecersensor()">
                        <option value="error">Selecione um Canteiro</option>
                        <option value="1">Canteiro 1</option>
                        <option value="2">Canteiro 2</option>
                        <option value="3">Canteiro 3</option>
                        <option value="4">Canteiro 4</option>
                        <option value="5">Canteiro 5</option>
                        <option value="6">Canteiro 6</option>
                        <option value="7">Canteiro 7</option>
                        <option value="8">Canteiro 8</option>
                    </select>
                </div>
                <div class="filtro-content" id="box_sensor" style="display: none;">
                    <span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um canteiro</option>
                        <option value="1">Sensor 1</option>
                        <option value="2">Sensor 2</option>
                        <option value="3">Sensor 3</option>
                    </select>
                </div>
            </div>
            <div class="action-box-filter">
                <button onclick="chamarfiltro()" class="button-filter">Aplicar Filtros</button>
                <div class="ajuste-subtitle">
                    <span class="subtitle-filter ">Filtros Ativos:</span>
                    <div class="card-master-filtro">
                        <div class="card-filtro" id="div_data_fixa" style="display: none;">
                            <span class="subtitle-span">Data: 18/08/2019</span>
                            <button onclick="closecard1()" class="close-card">X</button>
                        </div>
                        <div class="card-filtro" id="div_data_intervalo" style="display: none;">
                            <span class="subtitle-span">Intervalo de: <br> 18/08/2019 - 19/09/2019</span>
                            <button onclick="closecard2()" class="close-card">X</button>
                        </div>
                        <div class="card-filtro" id="div_canteiro" style="display: none;">
                            <span class="subtitle-span">Canteiro: 8</span>
                            <button onclick="closecard3()" class="close-card">X</button>
                        </div>
                        <div class="card-filtro" id="div_sensor" style="display: none;">
                            <span class="subtitle-span">Sensor 24</span>
                            <button onclick="closecard4()" class="close-card">X</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Fim do Filtro -->
    </section>
    <div class="barra-horizontal"></div>
    <section class="alert-box" id="box_alerta">
        <h3 class="title-alert">Alertas</h3>
        <div class="pagina-box">
            <button onclick="menosAlerta()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/10</span>
            <button onclick="maisAlerta()" class="button-pagina">❯</button>
        </div>
        <div class="box-alerta">
            <h3 class="title-card-alert">Alerta Emitidos em: 11/04/2025 01:00</h3>
            <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro 3 - Sensor 9</span>
                    <span>Umidade capturada: 80%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text">Perigo</span>
                </div>
            </div>
        </div>

    </section>
</body>
<html>
<script>
    //Menu Hamburguer Config Inicio
    document.addEventListener('DOMContentLoaded', function () {
        const botaoMenu = document.querySelector('.botao-vertical');
        const menu = document.querySelector('.elements-menu');
        const shadow = document.querySelector('.menu-shadow');
        const titleFiltro = document.querySelector('.title-filtro');

        botaoMenu.addEventListener('click', function (e) {
            e.stopPropagation();
            menu.classList.toggle('open-menu');
            botaoMenu.classList.toggle('x');

            if (menu.classList.contains('open-menu')) {
                titleFiltro.style.display = 'none';
            } else {
                titleFiltro.style.display = 'flex';
            }
        });

        shadow.addEventListener('click', function () {
            menu.classList.remove('open-menu');
            botaoMenu.classList.remove('x');
            titleFiltro.style.display = 'flex';
        });

        document.querySelector('.button-sair').addEventListener('click', () => {
            window.location.href = 'index.html';
        });

        document.querySelector('.backto-alto').addEventListener('click', () => {
            window.location.href = 'DashAlto.html';
        });

    });
    // Fim Menu Hamburguer Config

    // Varíaveis Globais
    var vt_filtro_data_fixa = [''];
    var vt_filtro_data_intervalo = [];
    var vt_filtro_canteiro = [''];
    var vt_filtro_sensor = [''];
    var ax_filtro_data_fixa = false;
    var ax_filtro_data_intervalo = false;
    var ax_filtro_canteiro = false;
    var ax_filtro_sensor = false;
    var id_empresa = sessionStorage.ID_EMPRESA;
    var dados_do_banco = [];
    var pagina_atual = 1;
    var ax_volta_semfiltro = false;
    var itens_pagina = 50;
    var contador_datafixa = 0;
    var ax_volta_data_fixa = false;
    var ax_volta_canteiro = false;
    var ax_volta_data_intervalo = false;
    var ax_volta_sensor = false;
    const data_formatada_dia_hora = {
        timeZone: 'America/Sao_Paulo',
        day: '2-digit',
        month: '2-digit',
        hour: '2-digit',
        minute: '2-digit'
    };
    // Requisição para puxar todos os dados
    fetch(`/usuarios/buscarAlertas/${id_empresa}`, {
        method: 'GET',
        headers: {
            "Content-type": "application/json"
        }
    })
        .then(data => {
            return data.json();
        })
        .then(data => {
            console.log("Alertas Puxados")
            console.log(data);
            dados_do_banco = data;
            var pagina_totais = Math.ceil(dados_do_banco.length / 50);
            passador_span.innerHTML = `${pagina_atual}/${pagina_totais}`
            plotaralertas();
        })
        .catch(error => {
            console.log("Erro no catch:", error);
        })
    //Plotar Alertas
    function plotaralertas() {
        if (!ax_volta_semfiltro) {
            pagina_atual = 1;
            ax_volta_semfiltro = true;
        }
        box_alerta.innerHTML = `
        <h3 class="title-alert">Alertas</h3>
        <div class="pagina-box">
            <button onclick="menosAlerta()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pagina_atual}/${Math.ceil(dados_do_banco.length / 50)}</span>
            <button onclick="maisAlerta()" class="button-pagina">❯</button>
        </div>`
        const inicio = (pagina_atual - 1) * itens_pagina;
        const fim = Math.min(inicio + itens_pagina, dados_do_banco.length);
        for (let i = inicio; i < fim; i++) {
            var data_f = new Date(dados_do_banco[i].dtAlerta);
            var data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
            if (dados_do_banco[i].umidadeSolo >= 90 || dados_do_banco[i].umidadeSolo <= 60) {
                box_alerta.innerHTML += `
                <div class="box-alerta">
            <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
            <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                    <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:#FF5555">Perigo</span>
                </div>
            </div>
        </div>`
            }
            else {
                box_alerta.innerHTML += `
                <div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                    <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:#FFF155">Perigo</span>
                </div>
                </div>
                </div>`
            }
        }
        box_alerta.innerHTML += `
        <div class="pagina-box">
            <button onclick="menosAlerta()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pagina_atual}/${Math.ceil(dados_do_banco.length / 50)}</span>
            <button onclick="maisAlerta()" class="button-pagina">❯</button>
        </div>`
    }
    //Passadores
    function menosAlerta() {
        var pagina_totais = Math.ceil(dados_do_banco.length / 50);
        if (pagina_atual == 1) {
            pagina_atual = pagina_totais;
        } else {
            pagina_atual--;
        }
        passador_span.innerHTML = `${pagina_atual}/${pagina_totais}`
        plotaralertas();
    }
    function maisAlerta() {
        var pagina_totais = Math.ceil(dados_do_banco.length / 50);
        if (pagina_atual == pagina_totais) {
            pagina_atual = 1;
        } else {
            pagina_atual++;
        }
        passador_span.innerHTML = `${pagina_atual}/${pagina_totais}`
        plotaralertas();
    }

    //Aprece e Desparece sensorbox
    function aparecersensor() {
        var select = select_canteiro.value;
        if (select == "error") {
            box_sensor.style.display = 'none';
        } else if (select == "1") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="1">Sensor 1</option>
                        <option value="2">Sensor 2</option>
                        <option value="3">Sensor 3</option>
                    </select>`
        } else if (select == "2") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="4">Sensor 4</option>
                        <option value="5">Sensor 5</option>
                        <option value="6">Sensor 6</option>
                    </select>`
        } else if (select == "3") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="7">Sensor 7</option>
                        <option value="8">Sensor 8</option>
                        <option value="9">Sensor 9</option>
                    </select>`
        } else if (select == "4") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="10">Sensor 10</option>
                        <option value="11">Sensor 11</option>
                        <option value="12">Sensor 12</option>
                    </select>`
        } else if (select == "5") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="13">Sensor 13</option>
                        <option value="14">Sensor 14</option>
                        <option value="15">Sensor 15</option>
                    </select>`
        } else if (select == "6") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="16">Sensor 16</option>
                        <option value="17">Sensor 17</option>
                        <option value="18">Sensor 18</option>
                    </select>`
        } else if (select == "7") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="19">Sensor 19</option>
                        <option value="20">Sensor 20</option>
                        <option value="21">Sensor 21</option>
                    </select>`
        } else if (select == "8") {
            box_sensor.style.display = 'flex';
            box_sensor.innerHTML = `<span class="subtitle-filter">Sensor</span>
                    <select id="select_sensor" class="select-filtro">
                        <option value="error">Selecione um sensor</option>
                        <option value="22">Sensor 22</option>
                        <option value="23">Sensor 23</option>
                        <option value="24">Sensor 24</option>
                    </select>`
        }
    }

    //Aplicar Filtro
    function chamarfiltro() {
        var data_fixa = ipt_data_fixa.value;
        var data_intervalo_de = ipt_data_de.value;
        var data_intervalo_ate = ipt_data_ate.value;
        var canteiro = select_canteiro.value;
        var sensor = select_sensor.value;

        if ((data_fixa == '') && (data_intervalo_de == '' || data_intervalo_ate == '') && (canteiro == 'error') && (sensor == 'error')) {
            alert("Selecione um filtro para filtrar seus alertas");
            return;
        }
        if ((data_fixa != '') && (data_intervalo_de != '' && data_intervalo_ate != '')) {
            alert("Filtro Invalído. Adicione apenas um filtro de data");
            return;
        } else {
            if (data_fixa != '') {
                if (ax_filtro_data_intervalo) {
                    alert("Não foi possível adicionar o filtro. Pois Existe um filtro ativo de Intervalo de data. Desative para adicionar o filtro");
                    return;
                }
                vt_filtro_data_fixa[0] = data_fixa;
                const data = new Date(data_fixa + 'T00:00:00');
                const data_formatada = data.toLocaleDateString('pt-BR');
                div_data_fixa.style.display = 'flex';
                div_data_fixa.innerHTML =
                    `<span class="subtitle-span">Data:${data_formatada}</span>
                 <button onclick="closecard1()" class="close-card">X</button>`;

                ipt_data_fixa.value = '';
                ax_filtro_data_fixa = true;
            }
            if (data_intervalo_de != '' && data_intervalo_ate != '') {
                if (ax_filtro_data_fixa) {
                    alert("Não foi possível adicionar o filtro. Pois Existe um filtro ativo de data. Desative para adicionar o filtro");
                    return;
                }
                var data_de_f = new Date(data_intervalo_de + 'T00:00:00');
                var data_ate_f = new Date(data_intervalo_ate + 'T00:00:00');
                vt_filtro_data_intervalo = [];
                if (data_de_f > data_ate_f) {
                    data_intervalo_de = data_intervalo_ate;
                    data_intervalo_ate = ipt_data_de.value;
                    data_de_f = new Date(data_intervalo_de + 'T00:00:00');
                    data_ate_f = new Date(data_intervalo_ate + 'T00:00:00');
                }

                vt_filtro_data_intervalo.push(data_intervalo_de);
                vt_filtro_data_intervalo.push(data_intervalo_ate);
                const data_de_formatada = data_de_f.toLocaleDateString('pt-BR');
                const data_ate_formatada = data_ate_f.toLocaleDateString('pt-BR');
                div_data_intervalo.style.display = 'flex';
                div_data_intervalo.innerHTML = `
                <span class="subtitle-span">Intervalo de: <br>${data_de_formatada} - ${data_ate_formatada}</span>
                 <button onclick="closecard2()" class="close-card">X</button>`
                ipt_data_de.value = '';
                ipt_data_ate.value = '';
                ax_filtro_data_intervalo = true;
            }
        }
        if (canteiro != 'error') {
            for (let i = 1; i <= 8; i++) {
                if (canteiro == `${i}`) {
                    vt_filtro_canteiro[0] = i;
                    div_canteiro.style.display = 'flex';
                    div_canteiro.innerHTML =
                        `<span class="subtitle-span">Canteiro:${i}</span>
                    <button onclick="closecard3()" class="close-card">X</button>`
                    ax_filtro_canteiro = true;
                }

            }
        }
        if (sensor != 'error') {
            for (let i = 1; i <= 24; i++) {
                if (sensor == `${i}`) {
                    vt_filtro_sensor[0] = i;
                    div_sensor.style.display = 'flex';
                    div_sensor.innerHTML =
                        `<span class="subtitle-span">Sensor:${i}</span>
                    <button onclick="closecard4()" class="close-card">X</button>`
                    ax_filtro_sensor = true;
                }
            }
        }
        if (ax_filtro_canteiro || ax_filtro_data_fixa || ax_filtro_data_intervalo || ax_filtro_sensor) {
            alert("Filtro Aplicado");
            plotarfiltro();
        }

    }
    // Fecha os filtros
    function closecard1() {
        vt_filtro_data_fixa[0] = '';
        div_data_fixa.style.display = 'none';
        ax_filtro_data_fixa = false;
        ax_volta_data_fixa = false;
        plotarfiltro()
    }
    function closecard2() {
        vt_filtro_data_intervalo = [];
        div_data_intervalo.style.display = 'none';
        ax_filtro_data_intervalo = false;
        ax_volta_data_intervalo = false;
        plotarfiltro()
    }
    function closecard3() {
        vt_filtro_canteiro = [''];
        div_canteiro.style.display = 'none';
        ax_filtro_canteiro = false;
        ax_volta_canteiro = false;
        plotarfiltro()
    }
    function closecard4() {
        vt_filtro_sensor = [''];
        div_sensor.style.display = 'none';
        ax_filtro_sensor = false;
        ax_volta_sensor = false;
        plotarfiltro();
    }
    //Variaveis Global Passadores
    var total_paginas_data_fixa = 0;
    var pag_atual_data_fixa = 1;
    var total_paginas_data_intervalo = 0;
    var pag_atual_data_intervalo = 1;
    var total_paginas_canteiro = 0;
    var pag_atual_canteiro = 1;
    var total_paginas_sensor = 0;
    var pag_atual_sensor = 1;
    var total_paginas_sensor_canteiro = 0;
    var pag_atual_sensor_canteiro = 1;
    var total_paginas_canteiro_df = 0;
    var pag_atual_canteiro_df = 1;
    var total_paginas_canteiro_di = 0;
    var pag_atual_canteiro_di = 1;
    var total_paginas_sensor_di = 0;
    var pag_atual_sensor_di = 1;
    var total_paginas_sensor_df = 0;
    var pag_atual_sensor_df = 1;
    //Atualizar passadores filtros
    function menosAlerta1() {
        if (pag_atual_data_fixa == 1) {
            pag_atual_data_fixa = total_paginas_data_fixa;
        } else {
            pag_atual_data_fixa--;
        }
        plotarfiltro();
    }
    function maisAlerta1() {
        if (pag_atual_data_fixa == total_paginas_data_fixa) {
            pag_atual_data_fixa = 1;
        } else {
            pag_atual_data_fixa++;
        }
        plotarfiltro();
    }
    function menosAlerta2() {
        if (pag_atual_data_intervalo == 1) {
            pag_atual_data_intervalo = total_paginas_data_intervalo;
        } else {
            pag_atual_data_intervalo--;
        }
        plotarfiltro();
    }
    function maisAlerta2() {
        if (pag_atual_data_intervalo == total_paginas_data_intervalo) {
            pag_atual_data_intervalo = 1;
        } else {
            pag_atual_data_intervalo++;
        }
        plotarfiltro();
    }
    function menosAlerta3() {
        if (pag_atual_canteiro == 1) {
            pag_atual_canteiro = total_paginas_canteiro;
        } else {
            pag_atual_canteiro--;
        }
        plotarfiltro();
    }
    function maisAlerta3() {
        if (pag_atual_canteiro == total_paginas_canteiro) {
            pag_atual_canteiro = 1;
        } else {
            pag_atual_canteiro++;
        }
        plotarfiltro();
    }
    function menosAlerta4() {
        if (pag_atual_sensor == 1) {
            pag_atual_sensor = total_paginas_sensor;
        } else {
            pag_atual_sensor--;
        }
        plotarfiltro();
    }
    function maisAlerta4() {
        if (pag_atual_sensor == total_paginas_sensor) {
            pag_atual_sensor = 1;
        } else {
            pag_atual_sensor++;
        }
        plotarfiltro();
    }
    function menosAlerta5() {
        if (pag_atual_sensor_canteiro == 1) {
            pag_atual_sensor_canteiro = total_paginas_sensor_canteiro;
        } else {
            pag_atual_sensor_canteiro--;
        }
        plotarfiltro();
    }
    function maisAlerta5() {
        if (pag_atual_sensor_canteiro == total_paginas_sensor_canteiro) {
            pag_atual_sensor_canteiro = 1;
        } else {
            pag_atual_sensor_canteiro++;
        }
        plotarfiltro();
    }
    function menosAlerta6() {
        if (pag_atual_canteiro_df == 1) {
            pag_atual_canteiro_df = total_paginas_canteiro_df;
        } else {
            pag_atual_canteiro_df--;
        }
        plotarfiltro();
    }
    function maisAlerta6() {
        if (pag_atual_canteiro_df == total_paginas_canteiro_df) {
            pag_atual_canteiro_df = 1;
        } else {
            pag_atual_canteiro_df++;
        }
        plotarfiltro();
    }
    function menosAlerta7() {
        if (pag_atual_canteiro_di == 1) {
            pag_atual_canteiro_di = total_paginas_canteiro_di;
        } else {
            pag_atual_canteiro_di--;
        }
        plotarfiltro();
    }
    function maisAlerta7() {
        if (pag_atual_canteiro_di == total_paginas_canteiro_di) {
            pag_atual_canteiro_di = 1;
        } else {
            pag_atual_canteiro_di++;
        }
        plotarfiltro();
    }
    function menosAlerta8() {
        if (pag_atual_sensor_di == 1) {
            pag_atual_sensor_di = total_paginas_sensor_di;
        } else {
            pag_atual_sensor_di--;
        }
        plotarfiltro();
    }
    function maisAlerta8() {
        if (pag_atual_sensor_di == total_paginas_sensor_di) {
            pag_atual_sensor_di = 1;
        } else {
            pag_atual_sensor_di++;
        }
        plotarfiltro();
    }
    //Plotar textos com filtros
    function plotarfiltro() {
        //-----------------------------------------------------------------------------------------------
        if (vt_filtro_data_fixa[0] != '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] == '' && vt_filtro_sensor[0] == '') {
            if (!ax_volta_data_fixa) {
                pag_atual_data_fixa = 1;
                ax_volta_data_fixa = true;
            }
            console.log("Apenas Data fixa");
            total_paginas_data_fixa = 0;
            let inicio = (pag_atual_data_fixa - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_do_banco.length);
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                data_banco.setHours(data_banco.getHours() - 3);
                const ano = data_banco.getFullYear();
                const mes = String(data_banco.getMonth() + 1).padStart(2, '0');
                const dia = String(data_banco.getDate()).padStart(2, '0');
                const data_comparacao = `${ano}-${mes}-${dia}`;
                if (data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_data_fixa++;
                }
            }
            total_paginas_data_fixa = Math.ceil(total_paginas_data_fixa / itens_pagina);
            if (total_paginas_data_fixa == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta1()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta1()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta1()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_data_fixa}/${total_paginas_data_fixa}</span>
            <button onclick="maisAlerta1()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                data_banco.setHours(data_banco.getHours() - 3);
                const ano = data_banco.getFullYear();
                const mes = String(data_banco.getMonth() + 1).padStart(2, '0');
                const dia = String(data_banco.getDate()).padStart(2, '0');
                const data_comparacao = `${ano}-${mes}-${dia}`;
                var data_f = new Date(dados_do_banco[i].dtAlerta);
                var data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                if (data_comparacao == vt_filtro_data_fixa[0]) {
                    if (dados_do_banco[i].umidadeSolo >= 90 || dados_do_banco[i].umidadeSolo <= 60) {
                        box_alerta.innerHTML += `<div class="box-alerta">
                        <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                        <div class="flex-alert">
                        <div class="info-alert">
                        <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                        <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                        </div>
                        <div class="nivel-alert">
                        <span>Nível de Criticidade:</span>
                        <span class="alert-text" style="color:#FF5555">Perigo</span>
                        </div>
                        </div>
                        </div>`
                    } else {
                        box_alerta.innerHTML += `<div class="box-alerta">
                        <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                        <div class="flex-alert">
                        <div class="info-alert">
                        <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                        <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                        </div>
                        <div class="nivel-alert">
                        <span>Nível de Criticidade:</span>
                        <span class="alert-text" style="color:#FFF155">Perigo</span>
                        </div>
                        </div>
                        </div>`
                    }
                }

            }
            if (total_paginas_data_fixa > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta1()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_data_fixa}/${total_paginas_data_fixa}</span>
                <button onclick="maisAlerta1()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length > 0 && vt_filtro_canteiro[0] == '' && vt_filtro_sensor[0] == '') {
            if (!ax_volta_data_intervalo) {
                pag_atual_data_intervalo = 1;
                ax_volta_data_intervalo = true;
            }
            total_paginas_data_intervalo = 0;
            let inicio = (pag_atual_data_intervalo - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_do_banco.length);
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                const data_de = new Date(vt_filtro_data_intervalo[0]);
                const data_ate = new Date(vt_filtro_data_intervalo[1]);
                data_de.setHours(0, 0, 0, 0)
                data_ate.setHours(23, 59, 59, 999)
                if (data_banco >= data_de && data_banco <= data_ate) {
                    total_paginas_data_intervalo++;
                }
            }
            total_paginas_data_intervalo = Math.ceil(total_paginas_data_intervalo / itens_pagina);

            if (total_paginas_data_intervalo == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta2()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta2()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta2()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_data_intervalo}/${total_paginas_data_intervalo}</span>
            <button onclick="maisAlerta2()" class="button-pagina">❯</button>
            </div>`
            } for (let i = inicio; i < fim; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                const data_de = new Date(vt_filtro_data_intervalo[0]);
                const data_ate = new Date(vt_filtro_data_intervalo[1]);
                console.log(data_ate);
                data_de.setHours(0, 0, 0, 0);
                data_ate.setHours(23, 59, 59, 999);
                var data_f = new Date(dados_do_banco[i].dtAlerta);
                var data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                if (data_banco >= data_de && data_banco <= data_ate) {
                    if (dados_do_banco[i].umidadeSolo >= 90 || dados_do_banco[i].umidadeSolo <= 60) {
                        box_alerta.innerHTML += `<div class="box-alerta">
                        <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                        <div class="flex-alert">
                        <div class="info-alert">
                        <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                        <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                        </div>
                        <div class="nivel-alert">
                        <span>Nível de Criticidade:</span>
                        <span class="alert-text" style="color:#FF5555">Perigo</span>
                        </div>
                        </div>
                        </div>`
                    } else {
                        box_alerta.innerHTML += `<div class="box-alerta">
                        <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                        <div class="flex-alert">
                        <div class="info-alert">
                        <span>Canteiro:${dados_do_banco[i].fkCanteiro} - Sensor ${((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)}</span>
                        <span>Umidade capturada:${dados_do_banco[i].umidadeSolo}%</span>
                        </div>
                        <div class="nivel-alert">
                        <span>Nível de Criticidade:</span>
                        <span class="alert-text" style="color:#FFF155">Perigo</span>
                        </div>
                        </div>
                        </div>`
                    }
                }
            }
            if (total_paginas_data_intervalo > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta2()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_data_intervalo}/${total_paginas_data_intervalo}</span>
                <button onclick="maisAlerta2()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] == '') {
            total_paginas_canteiro = 0;
            let dados_filtrados = []

            if (!ax_volta_canteiro) {
                pag_atual_canteiro = 1;
                ax_volta_canteiro = true;
            }
            for (let i = 0; i < dados_do_banco.length; i++) {
                if (Number(dados_do_banco[i].fkCanteiro) == Number(vt_filtro_canteiro[0])) {
                    total_paginas_canteiro++;
                    console.log("1")
                    dados_filtrados.push(dados_do_banco[i])
                }
            }
            let inicio = (pag_atual_canteiro - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            total_paginas_canteiro = Math.ceil(total_paginas_canteiro / itens_pagina);
            if (total_paginas_canteiro == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta3()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta3()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta3()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_canteiro}/${total_paginas_canteiro}</span>
            <button onclick="maisAlerta3()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {

                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";
                box_alerta.innerHTML += `<div class="box-alerta">
                    <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                    <div class="flex-alert">
                    <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                    </div>
                    <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                    </div>
                    </div>
                    </div>`;
            }

            if (total_paginas_canteiro > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta3()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_canteiro}/${total_paginas_canteiro}</span>
                <button onclick="maisAlerta3()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] == '' && vt_filtro_sensor[0] != '') {
            console.log("Apenas Sensor");
            let posicao_sensores = []
            if (!ax_volta_sensor) {
                ax_volta_sensor = true;
                pag_atual_sensor = 1;
            }
            for (let i = 0; i < dados_do_banco.length; i++) {
                if (Number(vt_filtro_sensor[0]) == Number((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor)) {
                    total_paginas_sensor++;
                    posicao_sensores.push(dados_do_banco[i])
                }
            }
            total_paginas_sensor = Math.ceil(total_paginas_sensor / itens_pagina);
            let inicio = (pag_atual_sensor - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, posicao_sensores.length);
            if (total_paginas_sensor == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta4()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta4()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta4()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor}/${total_paginas_sensor}</span>
            <button onclick="maisAlerta4()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = posicao_sensores[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";

                box_alerta.innerHTML += `<div class="box-alerta">
            <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
            <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
            </div>
        </div>`;
            }
            if (total_paginas_sensor > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta4()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor}/${total_paginas_sensor}</span>
                <button onclick="maisAlerta4()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] != '') {
            console.log("Canteiro + Sensor");
            let dados_filtrados = []
            total_paginas_sensor_canteiro = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                if ((dados_do_banco[i].fkCanteiro == vt_filtro_canteiro[0]) && (vt_filtro_sensor[0] == ((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor))) {
                    total_paginas_sensor_canteiro++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }
            let inicio = (pag_atual_sensor - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            total_paginas_sensor_canteiro = Math.ceil(total_paginas_sensor_canteiro / itens_pagina);
            if (total_paginas_sensor_canteiro == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta5()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta5()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta5()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor_canteiro}/${total_paginas_sensor_canteiro}</span>
            <button onclick="maisAlerta5()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_sensor_canteiro > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta4()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor_canteiro}/${total_paginas_sensor_canteiro}</span>
                <button onclick="maisAlerta4()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] != '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] == '') {
            console.log("Canteiro + Datafixa")
            let dados_filtrados = []
            total_paginas_canteiro_df = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                data_banco.setHours(data_banco.getHours() - 3);
                const ano = data_banco.getFullYear();
                const mes = String(data_banco.getMonth() + 1).padStart(2, '0');
                const dia = String(data_banco.getDate()).padStart(2, '0');
                const data_comparacao = `${ano}-${mes}-${dia}`;
                data_de.setHours(0, 0, 0, 0)
                data_ate.setHours(23, 59, 59, 999)
                if (data_banco >= data_de && data_banco <= data_ate && data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_data_intervalo++;
                }
            }
            let inicio = (pag_atual_sensor - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            total_paginas_canteiro_df = Math.ceil(total_paginas_canteiro_df / itens_pagina);
            if (total_paginas_canteiro_df == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta6()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta6()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta6()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_canteiro_df}/${total_paginas_canteiro_df}</span>
            <button onclick="maisAlerta6()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_canteiro_df > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta6()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_canteiro_df}/${total_paginas_canteiro_df}</span>
                <button onclick="maisAlerta6()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length > 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] == '') {
            console.log("Canteiro + DataIntervalo")
            let dados_filtrados = []
            total_paginas_canteiro_di = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                const data_de = new Date(vt_filtro_data_intervalo[0]);
                const data_ate = new Date(vt_filtro_data_intervalo[1]);
                data_de.setHours(0, 0, 0, 0)
                data_ate.setHours(23, 59, 59, 999)
                if ((dados_do_banco[i].fkCanteiro == vt_filtro_canteiro[0]) && (data_banco >= data_de && data_banco <= data_ate)) {
                    total_paginas_canteiro_di++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }           
            total_paginas_canteiro_di = Math.ceil(total_paginas_canteiro_di / itens_pagina);
            let inicio = (pag_atual_canteiro_di - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            if (total_paginas_canteiro_di == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta7()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta7()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta7()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_canteiro_di}/${total_paginas_canteiro_di}</span>
            <button onclick="maisAlerta7()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_canteiro_di > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta7()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_canteiro_di}/${total_paginas_canteiro_di}</span>
                <button onclick="maisAlerta7()" class="button-pagina">❯</button>
                </div>`
            }
            //-----------------------------------------------------------------------------------------------
        } else if (vt_filtro_data_fixa[0] != '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] == '' && vt_filtro_sensor[0] != '') {
            console.log("Sensor + Datafixa")
            let dados_filtrados = []
            total_paginas_sensor_di = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                data_banco.setHours(data_banco.getHours() - 3);
                const ano = data_banco.getFullYear();
                const mes = String(data_banco.getMonth() + 1).padStart(2, '0');
                const dia = String(data_banco.getDate()).padStart(2, '0');
                const data_comparacao = `${ano}-${mes}-${dia}`;
                if (Number(vt_filtro_sensor[0]) == Number((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor) && data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_sensor_di++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }           
            total_paginas_sensor_di = Math.ceil(total_paginas_sensor_di / itens_pagina);
            let inicio = (pag_atual_canteiro_di - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            if (total_paginas_sensor_di == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta8()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta8()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta8()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor_di}/${total_paginas_sensor_di}</span>
            <button onclick="maisAlerta8()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_sensor_di > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta8()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor_di}/${total_paginas_sensor_di}</span>
                <button onclick="maisAlerta8()" class="button-pagina">❯</button>
                </div>`
            }
        }//-----------------------------------------------------------------------------------------------
         else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length > 0 && vt_filtro_canteiro[0] == '' && vt_filtro_sensor[0] != '') {
            console.log("Sensor + DataIntervalo")
            let dados_filtrados = []
            total_paginas_sensor_df = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                const data_de = new Date(vt_filtro_data_intervalo[0]);
                const data_ate = new Date(vt_filtro_data_intervalo[1]);
                data_de.setHours(0, 0, 0, 0)
                data_ate.setHours(23, 59, 59, 999)
                if (Number(vt_filtro_sensor[0]) == Number((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor) && data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_sensor_df++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }           
            total_paginas_sensor_df = Math.ceil(total_paginas_sensor_df / itens_pagina);
            let inicio = (pag_atual_canteiro_di - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            if (total_paginas_sensor_df == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta9()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta9()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta9()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor_df}/${total_paginas_sensor_df}</span>
            <button onclick="maisAlerta9()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_sensor_df > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta9()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor_df}/${total_paginas_sensor_df}</span>
                <button onclick="maisAlerta9()" class="button-pagina">❯</button>
                </div>`
            }

        } //-----------------------------------------------------------------------------------------------
        else if (vt_filtro_data_fixa[0] != '' && vt_filtro_data_intervalo.length == 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] != '') {
            console.log("Canteiro + Sensor + DataFixa")
            let dados_filtrados = []
            total_paginas_sensor_di = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                data_banco.setHours(data_banco.getHours() - 3);
                const ano = data_banco.getFullYear();
                const mes = String(data_banco.getMonth() + 1).padStart(2, '0');
                const dia = String(data_banco.getDate()).padStart(2, '0');
                const data_comparacao = `${ano}-${mes}-${dia}`;
                if (Number(vt_filtro_sensor[0]) == Number((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor) && data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_sensor_di++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }           
            total_paginas_sensor_di = Math.ceil(total_paginas_sensor_di / itens_pagina);
            let inicio = (pag_atual_canteiro_di - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            if (total_paginas_sensor_di == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta8()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta8()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta8()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor_di}/${total_paginas_sensor_di}</span>
            <button onclick="maisAlerta8()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_sensor_di > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta8()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor_di}/${total_paginas_sensor_di}</span>
                <button onclick="maisAlerta8()" class="button-pagina">❯</button>
                </div>`
            }
        }//-----------------------------------------------------------------------------------------------
         else if (vt_filtro_data_fixa[0] == '' && vt_filtro_data_intervalo.length > 0 && vt_filtro_canteiro[0] != '' && vt_filtro_sensor[0] != '') {
            console.log("Canteiro + Sensor + DataIntervalo")
            let dados_filtrados = []
            total_paginas_sensor_df = 0;
            for (let i = 0; i < dados_do_banco.length; i++) {
                const data_banco = new Date(dados_do_banco[i].dtAlerta);
                const data_de = new Date(vt_filtro_data_intervalo[0]);
                const data_ate = new Date(vt_filtro_data_intervalo[1]);
                data_de.setHours(0, 0, 0, 0)
                data_ate.setHours(23, 59, 59, 999)
                if (Number(vt_filtro_sensor[0]) == Number((Number(dados_do_banco[i].fkCanteiro) - 1) * 3) + Number(dados_do_banco[i].fkSensor) && data_comparacao == vt_filtro_data_fixa[0]) {
                    total_paginas_sensor_df++;
                    dados_filtrados.push(dados_do_banco[i]);
                }
            }           
            total_paginas_sensor_df = Math.ceil(total_paginas_sensor_df / itens_pagina);
            let inicio = (pag_atual_canteiro_di - 1) * itens_pagina;
            let fim = Math.min(inicio + itens_pagina, dados_filtrados.length);
            if (total_paginas_sensor_df == 0) {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta9()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">1/1</span>
            <button onclick="maisAlerta9()" class="button-pagina">❯</button>
            </div>`
            } else {
                box_alerta.innerHTML = `
            <h3 class="title-alert">Alertas</h3>
            <div class="pagina-box">
            <button onclick="menosAlerta9()" class="button-pagina">❮</button>
            <span class="title-pagina" id="passador_span">${pag_atual_sensor_df}/${total_paginas_sensor_df}</span>
            <button onclick="maisAlerta9()" class="button-pagina">❯</button>
            </div>`
            }
            for (let i = inicio; i < fim; i++) {
                let dado = dados_filtrados[i];
                let data_f = new Date(dado.dtAlerta);
                let data_formatada = data_f.toLocaleString('pt-BR', data_formatada_dia_hora);
                let sensor_id = ((Number(dado.fkCanteiro) - 1) * 3) + Number(dado.fkSensor);
                let cor_alerta = (dado.umidadeSolo >= 90 || dado.umidadeSolo <= 60) ? "#FF5555" : "#FFF155";


                box_alerta.innerHTML += `<div class="box-alerta">
                <h3 class="title-card-alert">Alerta Emitidos em:${data_formatada}</h3>
                <div class="flex-alert">
                <div class="info-alert">
                    <span>Canteiro:${dado.fkCanteiro} - Sensor ${sensor_id}</span>
                    <span>Umidade capturada:${dado.umidadeSolo}%</span>
                </div>
                <div class="nivel-alert">
                    <span>Nível de Criticidade:</span>
                    <span class="alert-text" style="color:${cor_alerta}">Perigo</span>
                </div>
                </div>
                </div>`;

            }
            if (total_paginas_sensor_df > 0) {
                box_alerta.innerHTML += `
                <div class="pagina-box">
                <button onclick="menosAlerta9()" class="button-pagina">❮</button>
                <span class="title-pagina" id="passador_span">${pag_atual_sensor_df}/${total_paginas_sensor_df}</span>
                <button onclick="maisAlerta9()" class="button-pagina">❯</button>
                </div>`
            }
        } //-----------------------------------------------------------------------------------------------
         else {
            console.log("Nenhum filtro");
            ax_volta_semfiltro = false;
            ax_volta_data_intervalo = true;
            plotaralertas();
        }
    }

</script>